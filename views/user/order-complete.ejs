<!DOCTYPE HTML>
<html>
	<head>
	<title>Cosmix website</title>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Rokkitt:100,300,400,700" rel="stylesheet">
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="css/icomoon.css">
	<!-- Ion Icon Fonts-->
	<link rel="stylesheet" href="css/ionicons.min.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="css/bootstrap.min.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="css/magnific-popup.css">

	<!-- Flexslider  -->
	<link rel="stylesheet" href="css/flexslider.css">

	<!-- Owl Carousel -->
	<link rel="stylesheet" href="css/owl.carousel.min.css">
	<link rel="stylesheet" href="css/owl.theme.default.min.css">
	
	<!-- Date Picker -->
	<link rel="stylesheet" href="css/bootstrap-datepicker.css">
	<!-- Flaticons  -->
	<link rel="stylesheet" href="fonts/flaticon/font/flaticon.css">

	<!-- Theme style  -->
	<link rel="stylesheet" href="css/style.css">

	<style>
/* Modal Background (Transparent Black) */
#orderDetailsModal {
  position: fixed; /* Ensure it's fixed on the screen */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7); /* Transparent black */
  z-index: 1000; /* Higher z-index to appear above other content */
  display: flex; /* Initially hidden */
  justify-content: center;
  align-items: center;
}

/* Modal Content */
.modal-content {
  background-color: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
  width: 50%; /* Adjust width as needed */
  max-width: 600px;
  text-align: left;
  position: relative; /* So the close button is relative to the modal */
}

/* Close Button Styling */
#closeModal {
  position: absolute;
  top: 10px;
  right: 15px;
  font-size: 20px;
  color: #333;
  cursor: pointer;
}

/* Add fade-in animation (optional) */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
#orderDetailsModal.show {
  display: flex;
  animation: fadeIn 0.3s ease-in-out;
}


	</style>
	</head>
	<body>
		
	<div class="colorlib-loader"></div>

	<div id="page">
		
		<%- include("../../views/partials/user/header.ejs")%>


		<div class="breadcrumbs">
			<div class="container">
				<div class="row">
					<div class="col">
						<p class="bread"><span><a href="http://localhost:4000">Home</a></span> / <span>Purchase Complete</span></p>
					</div>
				</div>
			</div>
		</div>


		<div class="colorlib-product">
			<div class="container">
				<div class="row row-pb-lg">
					<div class="col-sm-10 offset-md-1">
						<div class="process-wrap">
							<div class="process text-center active">
								<p><span>01</span></p>
								<h3>Shopping Cart</h3>
							</div>
							<div class="process text-center active">
								<p><span>02</span></p>
								<h3>Checkout</h3>
							</div>
							<div class="process text-center active">
								<p><span>03</span></p>
								<h3>Order Complete</h3>
							</div>
						</div>
					</div>
				</div>


				<div id="orderDetailsModal" style="display:none;">
					<div class="modal-content">
					  <!-- Close Button -->
					  <span id="closeModal" style="cursor: pointer;">&times;</span>
					  
					  <!-- Modal Title -->
					  <h3>Order Details</h3>
					  
					  <!-- Order Details Section -->
					  <div id="orderDetails">
						<p><strong>Order ID: </strong> <%=orderDetails.orderId%></p>
						<p><strong>Customer Name: </strong> <%= userDetails.name%></p>
						<p><strong>Contact Number: </strong> <%= userDetails.phone%></p>

						

						<p><strong>Items Ordered:</strong></p>
					<table border="1" cellpadding="10" cellspacing="0" style="width:100%; border-collapse: collapse;">
  							<thead>
   							 <tr>
								<th>Product Image</th>

							<th>Product Name</th>
							<th>Quantity</th>
							<th>Price</th>
							</tr>
						</thead>
						<tbody>
							<% orderDetails.orderedItems.forEach((item) => { %>
							<tr>
								<td> <img    src="/uploads/<%= item.product.productImage[0]%>" alt="Product Image"  style="height: 60px; width: 50px;" >
								</td>

								<td><%= item.product.productName %></td>
								<td><%= item.quantity %></td>
								<td><%= item.price %></td>
							</tr> 
							<% }) %>
						</tbody>
					</table>

						
						<p><strong>Payable Amount:</strong><%= orderDetails.PayableAmount%></p>
						
						<p><strong>Shipping Address:</strong><%=addressDetails.address[0].city%> , <%= addressDetails.address[0].district%> , <%=addressDetails.address[0].landMark%></br>
						<%= addressDetails.address[0].state%> , <%= addressDetails.address[0].pincode%></p>
					  </div>
					  
					</div>
				  </div>
				  
				
				
				<div class="row">
					<div class="col-sm-10 offset-sm-1 text-center">
						<p class="icon-addcart"><span><i class="icon-check"></i></span></p>
						<h2 class="mb-4">Thank you for purchasing, Your order is complete</h2>
						<p>
							<!-- <button id="viewDetailsBtn">View Order Details</button> -->

							<button class="btn btn-primary btn-outline-primary" id="viewOrder">View Details</button>
							<a href="http://localhost:4000"class="btn btn-primary btn-outline-primary"><i class="icon-shopping-cart"></i> Continue Shopping</a>
						</p>
					</div>
				</div>


			</div>
		</div>
        <%- include("../../views/partials/user/footer.ejs")%>

	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="ion-ios-arrow-up"></i></a>
	</div>
	
	<!-- jQuery -->
	<script src="js/jquery.min.js"></script>
   <!-- popper -->
   <script src="js/popper.min.js"></script>
   <!-- bootstrap 4.1 -->
   <script src="js/bootstrap.min.js"></script>
   <!-- jQuery easing -->
   <script src="js/jquery.easing.1.3.js"></script>
	<!-- Waypoints -->
	<script src="js/jquery.waypoints.min.js"></script>
	<!-- Flexslider -->
	<script src="js/jquery.flexslider-min.js"></script>
	<!-- Owl carousel -->
	<script src="js/owl.carousel.min.js"></script>
	<!-- Magnific Popup -->
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/magnific-popup-options.js"></script>
	<!-- Date Picker -->
	<script src="js/bootstrap-datepicker.js"></script>
	<!-- Stellar Parallax -->
	<script src="js/jquery.stellar.min.js"></script>
	<!-- Main -->
	<script src="js/main.js"></script>

	<script>
		const viewOrder = document.getElementById('viewOrder')
		const orderModal = document.getElementById('orderDetailsModal')
		const closeModal = document.getElementById('closeModal')


		viewOrder.addEventListener('click',()=>{
			if(orderModal.style.display='none'){
				orderModal.style.display='flex';
			}
		})

		closeModal.addEventListener('click',()=>{
			if(orderModal.style.display='flex'){
				orderModal.style.display='none'
			}
		})
	</script>
	</body>
</html>

